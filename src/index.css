@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Base + correctifs iOS
   ========================= */
@layer base {
  html {
    height: 100%;
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;      /* évite zoom auto texte iOS */
    -webkit-tap-highlight-color: transparent; /* retire le flash bleu sur iOS */
  }
  body {
    height: 100%;
    @apply text-neutral-900 bg-white antialiased;
    -webkit-font-smoothing: antialiased;
  }

  /* Variables safe-area disponibles partout */
  :root {
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
  }
}

/* =========================
   Utilitaires globaux
   ========================= */

/* Scrollbars masquées pour les barres horizontales */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Tap + inputs plus “tactiles” et anti-zoom iOS */
button, a, select, input {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  font-size: 16px; /* évite le zoom automatique iOS sur focus */
}

/* ===== Viewport fixes iOS (vh stables) =====
   À utiliser sur tes sections Hero : min-h-screen-fix min-h-screen-ios
*/
.min-h-screen-fix {
  /* unités stables : iOS 16+ */
  min-height: 100svh;
  min-height: 100dvh;
}
/* fallback iOS WebKit */
@supports (-webkit-touch-callout: none) {
  .min-h-screen-ios {
    min-height: -webkit-fill-available;
  }
}

/* ===== Safe areas & barres collées ===== */
:root { --nav-h: 56px; }               /* Hauteur de la TopNav */
.pt-safe { padding-top: env(safe-area-inset-top); }  /* coussin sous l’encoche */

.safe-page {
  padding-top: calc(var(--nav-h) + var(--safe-top));
  padding-bottom: var(--safe-bottom);
}

/* Conteneur principal quand une bottom bar est présente */
.has-bottom-nav {
  padding-bottom: calc(64px + var(--safe-bottom));
}

/* Barre du bas (tabs/CTA) — si tu l’utilises */
.bottom-nav {
  position: sticky;           /* Passe en fixed si un parent a overflow != visible */
  bottom: 0;
  padding-bottom: var(--safe-bottom);
  backdrop-filter: saturate(180%) blur(12px);
  -webkit-backdrop-filter: saturate(180%) blur(12px);
  background: rgba(255,255,255,0.7);
}
/* Important : sticky cassé si parent a overflow != visible */
.sticky-parent { overflow: visible; }

/* ===== Scrollers (listes produits, carrousels) ===== */
.scroller {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch; /* inertie iOS */
}

/* ===== Hero overlays / blur ===== */
.hero-blur {
  background: rgba(0,0,0,0.35); /* fallback si pas de blur */
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

/* ===== Images hero/cartes ===== */
.hero-img, .card-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  /* optionnel si tu veux stabiliser les ratios de cartes */
  /* aspect-ratio: 16 / 9; */
}

/* ===== Titres (meilleure césure iOS) ===== */
h1, .hero-title {
  text-wrap: balance;     /* Safari 17+ */
  line-height: 1.1;
  font-size: clamp(28px, 6vw, 40px);
}

/* Petites finitions iOS touch */
.noselect, button, .chip {
  -webkit-touch-callout: none;
  user-select: none;
}
/* Rend visible uniquement ce qui entre dans le viewport.
   La taille intrinsèque évite le saut de layout. */
.cv-auto {
  content-visibility: auto;
  contain-intrinsic-size: 800px;
}
